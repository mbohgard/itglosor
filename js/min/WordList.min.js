define(["MainNav","Helpers","lib/jquery"],function(e,t){var n,r,i,s,o=function(){var e=r.find("p"),t=e.outerWidth(),n=e.clone(),i;n.addClass("get-height").width(t).appendTo(r.find(".word-desc"));i=n.height();n.remove();return i},u=function(){var e;if(r.hasClass("is-expanded")){e=o();i.find(".word-desc p").height("");r.find(".word-desc p").height(e)}else r.find(".word-desc p").height("")},a=function(e){var t=n.find("li:not(.template) .word"),r;if(e===""){t.parent("li").show();return!1}t.not(":Contains("+e+")").parent("li").hide();t.filter(":Contains("+e+")").parent("li").show();r=t.filter(":visible");r.length<2&&f(r);t.filter(":hidden").length&&s.addClass("is-visible")},f=function(e){var t=e.parents("li");condition=e.hasClass("is-expanded")||t.hasClass("is-expanded");!condition&&!t.hasClass("pointer")&&e.trigger("click")},l=function(){var e=n.find("li:not(.template)").show();e.filter(".is-expanded").trigger("click");s.removeClass("is-visible")},c=function(){$(document).on("click",".word-list li",function(e){r=$(e.target).parents("li");r.length===0&&(r=$(this));i=n.find(".is-expanded").not(r);i.removeClass("is-expanded");r.toggleClass("is-expanded");u()});t.onUrlChange(function(){var e="#search/",n;if(t.urlContains(e)){n=t.url().replace(e,"");n.indexOf("#")!==-1&&(n="");a(n);n||l();t.$root.scrollTop(0)}else s.removeClass("is-visible")})};return{init:function(e){console.log("WordList initialized");n=e.wordList;s=e.backLink;c()}}});